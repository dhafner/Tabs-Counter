var tabCount=function(){var t=2e3,n=Math.random().toString(36).substring(7),a=0;this.onTabCountUpdate=[];var e,o=function(){var t=s(),a=Date.now();t.list[n]=a,(void 0===t.lastCleaned||Number(t.lastCleaned)+2e4<a)&&(t=r(t)),u(t),i(!1)},i=function(n){n=void 0===n||n;var e=s(),o=Object.keys(e.list),i=Date.now(),r=0;return o.forEach(function(n){e.list[n]+1.2*t>i&&r++}),n||a===r||onTabCountUpdate.forEach(function(t){t(r)}),a=r},r=function(n){var a=Object.keys(n.list),e=Date.now();return a.forEach(function(a){n.list[a]+Math.max(8e3,1.5*t)<e&&delete n.list[a]}),n.lastCleaned=e,n},u=function(t){localStorage.setItem("tabCountData","string"==typeof t?t:JSON.stringify(t))},s=function(){return savedData=localStorage.getItem("tabCountData"),null==savedData?{list:{}}:JSON.parse(savedData)},l=function(n){n=void 0===n||isNaN(n)||n<1e3?t:n,void 0!==e&&clearInterval(e),e=setInterval(function(){o()},t=n)};return o(),l(),window.onbeforeunload=function(t){var a=s();delete a.list[n],u(a)},{tabsCount:i,onTabChange:function(t,n){n=void 0!==n&&n,"function"==typeof t&&(onTabCountUpdate.push(t),n&&t(i()))},setUpdateInterval:l}}();