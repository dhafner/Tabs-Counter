var tabCount=function(){var t,n=2e3,e=Math.random().toString(36).substring(7),a=0,o=[],i=function(){var t=s(),n=Date.now();t.list[e]=n,(void 0===t.lastCleaned||Number(t.lastCleaned)+2e4<n)&&(t=l(t)),u(t),r(!1)},r=function(t){t=void 0===t||t;var e=s(),i=Object.keys(e.list),r=Date.now(),l=0;return i.forEach(function(t){e.list[t]+1.2*n>r&&l++}),t||a===l||o.forEach(function(t){t(l)}),a=l},l=function(t){var e=Object.keys(t.list),a=Date.now();return e.forEach(function(e){t.list[e]+Math.max(8e3,1.5*n)<a&&delete t.list[e]}),t.lastCleaned=a,t},u=function(t){localStorage.setItem("tabCountData","string"==typeof t?t:JSON.stringify(t))},s=function(){var t=localStorage.getItem("tabCountData");return null==t?{list:{}}:JSON.parse(t)},c=function(e){e=void 0===e||isNaN(e)||e<1e3?n:e,void 0!==t&&clearInterval(t),t=setInterval(function(){i()},n=e)};return i(),c(),window.onbeforeunload=function(t){var n=s();delete n.list[e],u(n)},{tabsCount:r,onTabChange:function(t,n){n=void 0!==n&&n,"function"==typeof t&&(o.push(t),n&&t(r()))},setUpdateInterval:c}}();